---
layout: post
title:  "benchmark之数学运算" 
permalink: jkdoc/benchmark-boid.html
type: manual
element: benchmark
version: Egret引擎 v1.5.3
---
       
### 概述

本benchmark主要测试大量数学运算的性能表现。使用的算法为群体运动时的集群AI，例如鱼群运动时每条鱼各自的路径。   
            
![]({{site.baseurl}}/assets/img-bench/sample-boid.jpg)         
             
请用智能手机扫描以下二维码，用浏览器打开页面进行测试：
            
![]({{site.baseurl}}/assets/img-bench/QRCode-boid.png)          
          
         
### 界面显示及控制使用说明
        
**左上角FPS字段：** 标准的实时性能显示。

**左下方browser字段：** 显示当前运行环境具体信息，包含系统及硬件平台，浏览器厂商，及操作系统版本，手机型号等具体信息。

         
        
**右下方count字段：** 表示当前集群单位数量；      
             
**右下方add/remove按钮：** 功能分别为添加、删除10个集群单位；    

**右下方clear按钮：** 重置集群单位数量为零；    

**右下方run字段兼按钮:** 切换是否进行持续的集群运算，冒号后边指示当前状态。      

**右下方draw字段兼按钮:** 切换是否绘制以呈现最后一次的运算结果，冒号后边指示当前状态。    
      
**右下方step按钮：** 单步运行并暂停，用以定格观察每一步集群运算的结果。只有draw为true时才有意义。    
      
      
### 附加说明及功能
**渲染模式：** 由于该benchmark使用了矢量绘线功能，而Egret引擎的WebGL模式尚不支持该功能，所以没有切换渲染模式的开关，只有Canvas的2D渲染模式。

**数量快速增减：** 对于add/remove按钮，手指轻触则会进行一次增减；手指按下保持将近半秒后，即可快速增减，直到松开手指。
      
      
### 针对性测试指南        

**数学运算性能：** 本项测试主要针对数学运算性能，因为所使用的集群算法的运算复杂度，对集群的单位数量非常敏感，通过增加单位数量，可以明显观察到运算性能消耗，注意该项消耗对应`FPS字段`中`cost`的第一个数字。可以通过设置`draw`为`false`，并保持`run`为`true`来停止渲染部分的性能消耗，来针对性测试数学运算性能。         














